<div data-role="view" data-title="View" data-layout="main" data-model="app.igusg" data-show="app.igusg.onShow" data-after-show="app.igusg.afterShow" id="igusgScreen" class="screen km-light">
    <header data-role="header">
        <div data-role="navbar" class="header-text">
           
            <img class="logocabecalho" src="styles/images/logo.svg">
            
             <button class="backbutton" onclick="setTimeout(function(){ event.preventDefault ? event.preventDefault() : event.returnValue = false; setTimeout(function(){window.kendo.mobile.application.pane.navigate('#:back')},20); window.NativePageTransitionsKendoAdapter.slide('down', null,'' + 140 + '', '' + 140 + '')}, 200)"></button>
            <!----<a class="backbutton" href="links/homeView/view.html" data-transition-native-androiddelay="250" data-transition-native-iosdelay="250" data-transition="slide:up" data-role="button" data-click=""></a>-->
            
            <!---<span data-bind="text: strings.igusg.title"></span>--->

        </div>
    </header>
    <div class="titulo_calculadoras">IDADE GESTACIONAL USG <br><div class="traco_titulo_calculadoras"></div></div>
    
    <div class="caixainfo">
        
        <div>Data da ultrassonografia:</div>
        <input id="ig_usg" name="ig_usg" class="calcgest campo_input"value="Clique aqui para inserir a data" />
        <div>Idade gestacional pela ultrassonografia:</div>
       <ul class="boxes_side">
           <li>
         <select name="ig_usgsemanas" id="ig_usgsemanas" class="calcgest campo_select">
            <option  value="1">1 semana</option>
			<option  value="2">2 semanas</option>
			<option  value="3">3 semanas</option>
			<option  value="4">4 semanas</option>
			<option  value="5">5 semanas</option>
			<option  value="6">6 semanas</option>
            <option  value="7">7 semana</option>
			<option  value="8">8 semanas</option>
			<option  value="9">9 semanas</option>
			<option  value="10">10 semanas</option>
			<option  value="11">11 semanas</option>
			<option  value="12">12 semanas</option>        
            <option  value="13">13 semana</option>
			<option  value="14">14 semanas</option>
			<option  value="15">15 semanas</option>
			<option  value="16">16 semanas</option>
			<option  value="17">17 semanas</option>
			<option  value="18">18 semanas</option>
            <option  value="19">19 semana</option>
			<option  value="20">20 semanas</option>
			<option  value="21">21 semanas</option>
			<option  value="22">22 semanas</option>
			<option  value="23">23 semanas</option>
			<option  value="24">24 semanas</option>       
            <option  value="25">25 semana</option>
			<option  value="26">26 semanas</option>
			<option  value="27">27 semanas</option>
			<option  value="28">28 semanas</option>
			<option  value="29">29 semanas</option>
			<option  value="30">30 semanas</option>
            <option  value="31">31 semana</option>
			<option  value="32">32 semanas</option>
			<option  value="33">33 semanas</option>
			<option  value="34">34 semanas</option>
			<option  value="35">35 semanas</option>
			<option  value="36">36 semanas</option>    
            <option  value="37">37 semana</option>
			<option  value="38">38 semanas</option>
			<option  value="39">39 semanas</option>
			<option  value="40">40 semanas</option>
			<option  value="41">41 semanas</option>
			<option  value="42">42 semanas</option>
            <option  value="43">43 semana</option>
			<option  value="44">44 semanas</option>
			<option  value="45">45 semanas</option>

		</select> 
        
             </li>
             <li>
         <select name="ig_usgdias" id="ig_usgdias" class="calcgest campo_select" value="Clique aqui para inserir a data">
       	 <option  value="0">0 dia</option>
            <option  value="1">1 dia</option>
			<option  value="2">2 dias</option>
			<option  value="3">3 dias</option>
			<option  value="4">4 dias</option>
			<option  value="5">5 dias</option>
			<option  value="6">6 dias</option>
		</select> 
            </li>
        </ul>
        
        
        <button onclick=" setTimeout(function(){calcular_ig_usg()}, 200);">CALCULAR</button>
       
         
  <script>
	
	$(function () {
    // Create a datepicker
    $("#ig_usg").mobiscroll().date({ 
        theme: 'normal', 
        display: 'bottom',
		lang: 'pt-BR',
    });
      
    $("#ig_usgdias").mobiscroll().select({ 
        theme: 'normal', 
        display: 'bottom',
		lang: 'pt-BR',
    });
      
      
    $("#ig_usgsemanas").mobiscroll().select({ 
        theme: 'normal', 
        display: 'bottom',
		lang: 'pt-BR',
    });
      
      
      
                 
});

function calcular_ig_usg() {
    var hoje = new Date();
    var meses = ["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];
    
    if (($("#ig_usg").val() != "Toque para inserir a data") && ($("#ig_usgsemanas_dummy").val() != "Inserir semana") && ($("#ig_usgdias_dummy").val() != "Inserir dia")) {         
    //if ($("#ig_usg").val() != "Clique aqui para inserir a data"){
            var data = $( "#ig_usg" ).val().split("/").reverse().join("/");
            var newdata = new Date(data); 
            var semanas = parseInt($( "#ig_usgsemanas" ).val());
            var dias = parseInt($( "#ig_usgdias").val());
            var totalDias = (semanas*7) + dias;
            var exameMenst = new Date((newdata.getTime() - totalDias * 24 * 60 * 60 * 1000));
            var dataparto = new Date(exameMenst.getTime() + 280 * 24 * 60 * 60 * 1000);
            var diasgest = (hoje.getTime() - exameMenst.getTime())/(24 * 60 * 60 * 1000);
            var semanasgest = diasgest/7;
            var converteSemana = parseInt(semanasgest);
            var diasExtras = parseInt(((semanasgest - converteSemana) *7) +0.5);
            if (diasExtras == 7) {
                diasExtras = 0
                converteSemana = converteSemana + 1
            }
            palavraDia = " dias";
            if (diasExtras == 1) {
                palavraDia = " dia";
            }
            
                   swal({
                  title: "RESULTADO:",
                  text: "<div class='infoswal'><b>IDADE GESTACIONAL: <br> <span style='font-weight:100!important;color:#000;font-size:14px;'>"+ converteSemana + " semanas e " + diasExtras + palavraDia +".</span>" + "<br><br><b>DATA PROVÁVEL DO PARTO: <br><span style='font-weight:100!important;color:#000;font-size:14px;'> " + dataparto.getDate() + " de " + meses[dataparto.getMonth()] + " de " + dataparto.getFullYear() +".</span></div>", 
                  html:true
              });
        
        
        
	}         
             
          
        if (($("#ig_usg").val() == "Toque para inserir a data") || ($("#ig_usgsemanas_dummy").val() == "Inserir semana") || ($("#ig_usgdias_dummy").val() == "Inserir dia")) { 

            swal("Opa!", "Preencha todos os campos!", "warning")
            
        }
    
    
    
	}             
             
	</script>
        
    </div>
    
    
    
</div>
    
    
    <!-- START_CUSTOM_CODE_homeView -->
    <!-- Add custom code here. For more information about custom code, see http://docs.telerik.com/platform/screenbuilder/troubleshooting/how-to-keep-custom-code-changes -->
    <!--<h1 data-bind="html: title"></h1>-->
    <!-- END_CUSTOM_CODE_homeView -->
