<div data-role="view" data-title="View" data-layout="main" data-model="app.igdum" data-show="app.igdum.onShow" data-after-show="app.igdum.afterShow" id="igdumScreen" class="screen km-light" data-scroller='{"elastic": false}' data-use-native-scrolling="true">
    <header data-role="header">
        <div data-role="navbar" class="header-text">
           
            <img class="logocabecalho" src="styles/images/logo.svg">
            
             <button class="backbutton" onclick="setTimeout(function(){ event.preventDefault ? event.preventDefault() : event.returnValue = false; setTimeout(function(){window.kendo.mobile.application.pane.navigate('#:back')},20); window.NativePageTransitionsKendoAdapter.slide('down', null,'' + 140 + '', '' + 140 + '')}, 200)"></button>
            <!----<a class="backbutton" href="links/homeView/view.html" data-transition-native-androiddelay="250" data-transition-native-iosdelay="250" data-transition="slide:up" data-role="button" data-click=""></a>-->
            
            <!---<span data-bind="text: strings.igdum.title"></span>--->

        </div>
    </header>
    <div class="titulo_calculadoras">IDADE GESTACIONAL DUM <br><div class="traco_titulo_calculadoras"></div></div>
    
    <div class="caixainfo">
        
        <div>Data da última menstruação:</div>
        <input id="dum" name="dum" class="calcgest campo_input"value="Clique aqui para inserir a data" /> 
        <button onclick=" setTimeout(function(){calcularGestacao()}, 200);">CALCULAR</button>
         <script>
	
	$(function () {
    // Create a datepicker
    $("#dum").mobiscroll().date({ 
        theme: 'normal', 
        display: 'bottom',
		lang: 'pt-BR',
    });
});

function calcularGestacao() {
    var hoje = new Date();
    var meses = ["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];
    
    if ($("#dum").val() != "Toque para inserir a data"){
		var data = $( "#dum" ).val().split("/").reverse().join("/");
        var newdata = new Date(data);     
        var dataultmens = new Date(newdata.getTime() + 280 * 24 * 60 * 60 * 1000);
        var dias = (hoje.getTime() - newdata.getTime())/(24 * 60 * 60 * 1000);
        var semanas = dias/7;
        var converteSemana = parseInt(semanas);
        var diasExtras = parseInt(((semanas - converteSemana) *7) +0.5);
		if (diasExtras == 7) {
            diasExtras = 0
			converteSemana = converteSemana + 1
        }
		palavraDia = " dias";
		if (diasExtras == 1) {
            palavraDia = " dia";
        }
        //document.getElementById("demo").innerHTML="<b>DATA PROVÁVEL DO PARTO: </b>" + dataultmens.getDate() + " de " + meses[dataultmens.getMonth()] + " de " +dataultmens.getFullYear()+"." + "<br><br><b>IDADE GESTACIONAL: </b> " + converteSemana + " semanas e " + diasExtras + palavraDia+".";
	    	
        swal({
                  title: "RESULTADO:",
                  text: "<div class='infoswal'><b>DATA PROVÁVEL DO PARTO: <br> <span style='font-weight:100!important;color:#000;font-size:14px;'>" + dataultmens.getDate() + " de " + meses[dataultmens.getMonth()] + " de " +dataultmens.getFullYear()+".</span>" + "<br><br><b>IDADE GESTACIONAL: <br><span style='font-weight:100!important;color:#000;font-size:14px;'> " + converteSemana + " semanas e " + diasExtras + palavraDia+".</span></div>", 
                  html:true
              });
    
    
      } 
        
        if ($("#dum").val() == "Toque para inserir a data"){

            swal("Opa!", "Você esqueceu de escolher uma data!", "warning")
            
        }
    
    
    
	}             
             
	</script>
        
    </div>
    
     
  
    
</div>
    
    
    <!-- START_CUSTOM_CODE_homeView -->
    <!-- Add custom code here. For more information about custom code, see http://docs.telerik.com/platform/screenbuilder/troubleshooting/how-to-keep-custom-code-changes -->
    <!--<h1 data-bind="html: title"></h1>-->
    <!-- END_CUSTOM_CODE_homeView -->
